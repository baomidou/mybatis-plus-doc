---
title: ä»£ç ç”Ÿæˆå™¨
sidebar:
  order: 1
  badge:
    text: New
---

import LastedDependency from '@/components/LastedDependency.astro';

å…¨æ–°çš„ MyBatis-Plus ä»£ç ç”Ÿæˆå™¨ï¼Œé€šè¿‡ builder æ¨¡å¼å¯ä»¥å¿«é€Ÿç”Ÿæˆä½ æƒ³è¦çš„ä»£ç ï¼Œå¿«é€Ÿä¸”ä¼˜é›…ï¼Œè·Ÿéšä¸‹é¢çš„ä»£ç ä¸€ç¹ä¸ºå¿«ã€‚

```java
<!-- CodeGenerator.java -->

FastAutoGenerator.create("url", "username", "password")
        .globalConfig(builder -> builder
                .author("Baomidou")
                .outputDir(Paths.get(System.getProperty("user.dir")) + "/src/main/java")
                .commentDate("yyyy-MM-dd")
        )
        .packageConfig(builder -> builder
                .parent("com.baomidou.mybatisplus")
                .entity("entity")
                .mapper("mapper")
                .service("service")
                .serviceImpl("service.impl")
                .xml("mapper.xml")
        )
        .strategyConfig(builder -> builder
                .entityBuilder()
                .enableLombok()
        )
        .templateEngine(new FreemarkerTemplateEngine())
        .execute();
```

## å®‰è£…

<LastedDependency groupId="com.baomidou" artifactId="mybatis-plus-generator" />

:::note
å…¨æ–°çš„ä»£ç ç”Ÿæˆå™¨æ·»åŠ äº 3.5.1 ç‰ˆæœ¬ï¼Œä¸”å¯¹å†å²ç‰ˆæœ¬ä¸å…¼å®¹ï¼å¦‚æœæ‚¨ç”¨çš„æ˜¯ 3.5.1 ä»¥ä¸‹çš„ç‰ˆæœ¬ï¼Œè¯·å‚è€ƒ [ä»£ç ç”Ÿæˆå™¨](/guides/code-generator/) è¿›è¡Œé…ç½®ä¸ä½¿ç”¨ã€‚
:::

ç”±äºä»£ç ç”Ÿæˆå™¨ç”¨åˆ°äº†æ¨¡æ¿å¼•æ“ï¼Œè¯·è‡ªè¡Œå¼•å…¥æ‚¨å–œå¥½çš„æ¨¡æ¿å¼•æ“ã€‚MyBatis-Plus Generator æ”¯æŒå¦‚ä¸‹æ¨¡æ¿å¼•æ“ï¼š

- VelocityTemplateEngine(Default)
- FreemarkerTemplateEngine
- BeetlTemplateEngine
- EnjoyTemplateEngine

å¦‚æœæ‚¨è¿˜æƒ³ä½¿ç”¨æˆ–é€‚é…å…¶ä»–æ¨¡æ¿å¼•æ“ï¼Œå¯è‡ªè¡Œç»§æ‰¿ `AbstractTemplateEngine` å¹¶å‚è€ƒå…¶ä»–æ¨¡æ¿å¼•æ“å®ç°è‡ªå®šä¹‰ã€‚

## ç”Ÿæˆæ–¹å¼

ä»£ç ç”Ÿæˆå™¨ç›®å‰æ”¯æŒä¸¤ç§ç”Ÿæˆæ–¹å¼ï¼š

1. **DefaultQuery (å…ƒæ•°æ®æŸ¥è¯¢)**
   - **ä¼˜ç‚¹ï¼š** æ ¹æ®é€šç”¨æ¥å£è¯»å–æ•°æ®åº“å…ƒæ•°æ®ç›¸å…³ä¿¡æ¯ï¼Œå¯¹æ•°æ®åº“é€šç”¨æ€§è¾ƒå¥½ã€‚
   - **ç¼ºç‚¹ï¼š** ä¾èµ–æ•°æ®åº“å‚å•†é©±åŠ¨å®ç°ã€‚
   - **å¤‡æ³¨ï¼š** é»˜è®¤æ–¹å¼ï¼Œéƒ¨åˆ†ç±»å‹å¤„ç†å¯èƒ½ä¸ç†æƒ³ã€‚

2. **SQLQuery (SQLæŸ¥è¯¢)**
   - **ä¼˜ç‚¹ï¼š** éœ€è¦æ ¹æ®æ•°æ®åº“ç¼–å†™å¯¹åº”è¡¨ã€ä¸»é”®ã€å­—æ®µè·å–ç­‰æŸ¥è¯¢è¯­å¥ã€‚
   - **ç¼ºç‚¹ï¼š** é€šç”¨æ€§ä¸å¼ºï¼ŒåŒæ•°æ®åº“å‚å•†ä¸åŒç‰ˆæœ¬å¯èƒ½ä¼šå­˜åœ¨å…¼å®¹é—®é¢˜ï¼ˆä¾‹å¦‚ï¼ŒH2æ•°æ®åº“åªæ”¯æŒ1.Xç‰ˆæœ¬ï¼‰ã€‚
   - **å¤‡æ³¨ï¼š** åæœŸä¸å†ç»´æŠ¤ã€‚

å¦‚æœæ˜¯å·²çŸ¥æ•°æ®åº“ï¼ˆæ— ç‰ˆæœ¬å…¼å®¹é—®é¢˜ï¼‰ï¼Œè¯·ç»§ç»­æŒ‰ç…§åŸæœ‰çš„SQLæŸ¥è¯¢æ–¹å¼ç»§ç»­ä½¿ç”¨ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š

```java
// MYSQL ç¤ºä¾‹ åˆ‡æ¢è‡³SQLæŸ¥è¯¢æ–¹å¼,éœ€è¦æŒ‡å®šå¥½ dbQuery ä¸ typeConvert æ¥ç”Ÿæˆ
FastAutoGenerator.create("url", "username", "password")
                .dataSourceConfig(builder ->
                        builder.databaseQueryClass(SQLQuery.class)
                                .typeConvert(new MySqlTypeConvert())
                                .dbQuery(new MySqlQuery())
                )
                // Other Config ...
```

å…ƒæ•°æ®æŸ¥è¯¢ç›®å‰æœ‰å¦‚ä¸‹é—®é¢˜ï¼š

1. ä¸æ”¯æŒä½¿ç”¨ NotLike çš„æ–¹å¼åå‘ç”Ÿæˆè¡¨ã€‚
2. æ— æ³•è¯»å–è¡¨æ³¨é‡Šï¼Œè§£å†³æ–¹æ³•ï¼š
   - MySQLé“¾æ¥å¢åŠ å±æ€§ `remarks=true&useInformationSchema=true`
   - Oracleé“¾æ¥å¢åŠ å±æ€§ `remarks=true` æˆ–è€… `remarksReporting=true`ï¼ˆæŸäº›é©±åŠ¨ç‰ˆæœ¬ï¼‰
   - SqlServerï¼šé©±åŠ¨ä¸æ”¯æŒ
3. éƒ¨åˆ† PostgreSQL ç±»å‹å¤„ç†ä¸ä½³ï¼ˆå¦‚ jsonã€jsonbã€uuidã€xmlã€money ç±»å‹ï¼‰ï¼Œè§£å†³æ–¹æ³•ï¼š
   - è½¬æ¢æˆè‡ªå®šä¹‰çš„ç±»å‹é…åˆè‡ªå®šä¹‰ TypeHandler æ¥å¤„ç†ã€‚
   - æ‰©å±• typeConvertHandler æ¥å¤„ç†ï¼ˆ3.5.3.3 åå¢åŠ äº† typeName è·å–ï¼‰ã€‚
4. MySQL ä¸‹ tinyint å­—æ®µè½¬æ¢é—®é¢˜ï¼š
   - å½“å­—æ®µé•¿åº¦ä¸º 1 æ—¶ï¼Œæ— æ³•è½¬æ¢æˆ Boolean å­—æ®µï¼Œå»ºè®®åœ¨æŒ‡å®šæ•°æ®åº“è¿æ¥æ—¶æ·»åŠ  `&tinyInt1isBit=true`ã€‚
   - å½“å­—æ®µé•¿åº¦å¤§äº 1 æ—¶ï¼Œé»˜è®¤è½¬æ¢æˆ Byteï¼Œå¦‚æœæƒ³ç»§ç»­è½¬æ¢æˆ Integerï¼Œå¯ä½¿ç”¨å¦‚ä¸‹ä»£ç ï¼š

        ```java
        FastAutoGenerator.create("url", "username", "password")
                .dataSourceConfig(builder ->
                        builder.typeConvertHandler((globalConfig, typeRegistry, metaInfo) -> {
                            // å…¼å®¹æ—§ç‰ˆæœ¬è½¬æ¢æˆInteger
                            if (JdbcType.TINYINT == metaInfo.getJdbcType()) {
                                return DbColumnType.INTEGER;
                            }
                            return typeRegistry.getColumnType(metaInfo);
                        })
                );
        ```

## ä½¿ç”¨

æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§å½¢å¼ä½¿ç”¨ä»£ç ç”Ÿæˆå™¨ã€‚

### å¿«é€Ÿç”Ÿæˆ

åœ¨ CodeGenerator ä¸­çš„ main æ–¹æ³•ä¸­ç›´æ¥æ·»åŠ ç”Ÿæˆå™¨ä»£ç ï¼Œå¹¶è¿›è¡Œç›¸å…³é…ç½®ï¼Œç„¶åç›´æ¥è¿è¡Œå³å¯ç”Ÿæˆä»£ç ã€‚

```java
<!-- CodeGenerator.java -->

public static void main(String[] args) {
    FastAutoGenerator.create("url", "username", "password")
            .globalConfig(builder -> {
                builder.author("baomidou") // è®¾ç½®ä½œè€…
                        .enableSwagger() // å¼€å¯ swagger æ¨¡å¼
                        .outputDir("D://"); // æŒ‡å®šè¾“å‡ºç›®å½•
            })
            .dataSourceConfig(builder ->
                    builder.typeConvertHandler((globalConfig, typeRegistry, metaInfo) -> {
                        int typeCode = metaInfo.getJdbcType().TYPE_CODE;
                        if (typeCode == Types.SMALLINT) {
                            // è‡ªå®šä¹‰ç±»å‹è½¬æ¢
                            return DbColumnType.INTEGER;
                        }
                        return typeRegistry.getColumnType(metaInfo);
                    })
            )
            .packageConfig(builder ->
                    builder.parent("com.baomidou.mybatisplus.samples.generator") // è®¾ç½®çˆ¶åŒ…å
                            .moduleName("system") // è®¾ç½®çˆ¶åŒ…æ¨¡å—å
                            .pathInfo(Collections.singletonMap(OutputFile.xml, "D://")) // è®¾ç½®mapperXmlç”Ÿæˆè·¯å¾„
            )
            .strategyConfig(builder ->
                    builder.addInclude("t_simple") // è®¾ç½®éœ€è¦ç”Ÿæˆçš„è¡¨å
                            .addTablePrefix("t_", "c_") // è®¾ç½®è¿‡æ»¤è¡¨å‰ç¼€
            )
            .templateEngine(new FreemarkerTemplateEngine()) // ä½¿ç”¨Freemarkerå¼•æ“æ¨¡æ¿ï¼Œé»˜è®¤çš„æ˜¯Velocityå¼•æ“æ¨¡æ¿
            .execute();
}
```

### äº¤äº’å¼ç”Ÿæˆ

äº¤äº’å¼ç”Ÿæˆåœ¨è¿è¡Œä¹‹åï¼Œä¼šæç¤ºæ‚¨è¾“å…¥ç›¸åº”çš„å†…å®¹ï¼Œç­‰å¾…é…ç½®è¾“å…¥å®Œæ•´ä¹‹åå°±è‡ªåŠ¨ç”Ÿæˆç›¸å…³ä»£ç ã€‚

```java
<!-- CodeGenerator.java -->

public static void main(String[] args) {
    FastAutoGenerator.create("url", "username", "password")
            // å…¨å±€é…ç½®
            .globalConfig((scanner, builder) -> builder.author(scanner.apply("è¯·è¾“å…¥ä½œè€…åç§°ï¼Ÿ")))
            // åŒ…é…ç½®
            .packageConfig((scanner, builder) -> builder.parent(scanner.apply("è¯·è¾“å…¥åŒ…åï¼Ÿ")))
            // ç­–ç•¥é…ç½®
            .strategyConfig((scanner, builder) -> builder.addInclude(getTables(scanner.apply("è¯·è¾“å…¥è¡¨åï¼Œå¤šä¸ªè‹±æ–‡é€—å·åˆ†éš”ï¼Ÿæ‰€æœ‰è¾“å…¥ all")))
                    .entityBuilder()
                    .enableLombok()
                    .addTableFills(
                            new Column("create_time", FieldFill.INSERT)
                    )
                    .build())
            // ä½¿ç”¨Freemarkerå¼•æ“æ¨¡æ¿ï¼Œé»˜è®¤çš„æ˜¯Velocityå¼•æ“æ¨¡æ¿
            .templateEngine(new FreemarkerTemplateEngine())
            .execute();
}

// å¤„ç† all æƒ…å†µ
protected static List<String> getTables(String tables) {
    return "all".equals(tables) ? Collections.emptyList() : Arrays.asList(tables.split(","));
}
```

å¦‚æœæ‚¨éœ€è¦æ›´å¤šä¾‹å­å¯æŸ¥çœ‹ test åŒ…ä¸‹é¢çš„ samplesã€‚

- [H2CodeGeneratorTest](https://github.com/baomidou/generator/blob/develop/mybatis-plus-generator/src/test/java/com/baomidou/mybatisplus/generator/samples/H2CodeGeneratorTest.java)
- [FastAutoGeneratorTest](https://github.com/baomidou/generator/blob/develop/mybatis-plus-generator/src/test/java/com/baomidou/mybatisplus/generator/samples/FastAutoGeneratorTest.java)

## é…ç½®

è¯·ç§»æ­¥è‡³ [ä»£ç ç”Ÿæˆå™¨é…ç½®](/reference/new-code-generator-configuration/) æŸ¥çœ‹ã€‚

## èµ„æº

- [ğŸ‘‰ æºç ](https://github.com/baomidou/mybatis-plus)ï¼šæ¬¢è¿å¤§å®¶é˜…è¯»æºç å¹¶å‚ä¸è´¡çŒ®ã€‚
- [ğŸ‘‰ è§†é¢‘æ•™ç¨‹è¯¦è§£](https://space.bilibili.com/483260422)ï¼šæ¬¢è¿å¤§å®¶å…³æ³¨ã€ç‚¹èµã€æŠ•å¸ã€è¯„è®ºã€‚
