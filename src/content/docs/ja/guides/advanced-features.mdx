---
title: é«˜åº¦ãªæ©Ÿèƒ½
sidebar:
  order: 19
---
import { LinkCard } from '@astrojs/starlight/components';

Mybatis-Mate ã¯ MyBatis-Plus å‘ã‘ã®ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºç´šãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã‚ã‚Šã€ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã‚’ã‚ˆã‚Šè¿…é€Ÿã‹ã¤ã‚¨ãƒ¬ã‚¬ãƒ³ãƒˆã«è¡Œã†ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚

- ä½¿ç”¨ä¾‹ ï¼š[ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰](https://gitee.com/baomidou/mybatis-mate-examples)
- ä½œè€…ã«é€£çµ¡ç¢ºèªå¾Œã€å…¬å¼ WeChat ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ Mybatis-Mate ã‚’ç´¹ä»‹ã™ã‚‹è¨˜äº‹ã‚’æ²è¼‰ã™ã‚‹ã¨ã€ç„¡æ–™ã§æ°¸ä¹…å€‹äººãƒ©ã‚¤ã‚»ãƒ³ã‚¹è¨¼æ˜æ›¸ã‚’å–å¾—ã§ãã¾ã™ã€‚
- ã“ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ MyBatis-Plus ã®æ‹¡å¼µãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã‚ã‚Šã€MyBatis-Plus ã®æœ‰æ–™ç‰ˆã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆã¯ `é’è‹—` ãŒå€‹äººã¨ã—ã¦è²¬ä»»ã‚’è² ã„ã¾ã™ã€‚

<LinkCard
  title="ç„¡æ–™ãƒ“ãƒ‡ã‚ªãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«"
  description="é’è‹—åˆ¶ä½œã€å“è³ªä¿è¨¼"
  href="https://space.bilibili.com/212983666/channel/collectiondetail?sid=606288"
/>

## ãƒ‡ãƒ¼ã‚¿ç›£æŸ»ï¼ˆç…§åˆï¼‰

- ä½¿ç”¨ä¾‹ï¼šğŸ‘‰ [mybatis-mate-audit](https://gitee.com/baomidou/mybatis-mate-examples/tree/master/mybatis-mate-audit)
- 2ã¤ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£å·®ç•°ã‚’æ¯”è¼ƒã—ã¾ã™ã€‚ä¾‹ï¼šéŠ€è¡Œå–å¼•æ˜ç´°ã®ç…§åˆã€‚
  ```java
  // 1ï¼ŒéåŒæœŸã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã€‚@EnableAsync ã§éåŒæœŸã‚’æœ‰åŠ¹ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™
  applicationEventPublisher.publishEvent(new DataAuditEvent((t) -> {
      List<Change> changes = t.apply(newVersion, oldVersion);
      for (Change valueChange : changes) {
          ValueChange change = (ValueChange) valueChange;
          System.err.println(String.format("%sä¸åŒ¹é…ï¼ŒæœŸæœ›å€¼ %s å®é™…å€¼ %s", change.getPropertyName(), change.getLeft(), change.getRight()));
      }
  }));

  // 2ï¼Œæ‰‹å‹•ã§ã®æ¯”è¼ƒå‘¼ã³å‡ºã—
  DataAuditor.compare(obj1, obj2);
  ```

## ãƒ‡ãƒ¼ã‚¿æ©Ÿå¯†èªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

- ä½¿ç”¨ä¾‹ğŸ‘‰ [mybatis-mate-sensitive-words](https://gitee.com/baomidou/mybatis-mate-examples/tree/master/mybatis-mate-sensitive-words)
- ãƒ‡ãƒ¼ã‚¿æ©Ÿå¯†èªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ï¼ˆACã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ï¼‰ã¯ã€ãƒãƒ³ãƒ‰ãƒ©ã®è¨­å®šãŒå®Œäº†ã™ã‚‹ã¨ã€ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãŒè‡ªå‹•çš„ã«ã™ã¹ã¦ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ–‡å­—åˆ—ã®æ©Ÿå¯†èªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã‚’å‡¦ç†ã—ã¾ã™ã€‚ãƒã‚¹ãƒˆã•ã‚ŒãŸã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ã‚µãƒãƒ¼ãƒˆã—ã€æ©Ÿå¯†èªã‚’è¦‹é€ƒã—ã¾ã›ã‚“ã€‚
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è‡ªä½“ã§æ©Ÿå¯†èªè¾æ›¸ã‚’ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ï¼ˆç„¡æ–™ã€ç®¡ç†å¯èƒ½ï¼‰ã—ã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚ŒãŸèªæ ¹ã‚’ãƒ­ãƒ¼ãƒ‰ã—ã€è¾æ›¸ã®å†ãƒ­ãƒ¼ãƒ‰ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

## ãƒ‡ãƒ¼ã‚¿ç¯„å›²ï¼ˆãƒ‡ãƒ¼ã‚¿æ¨©é™ï¼‰

- ä½¿ç”¨ä¾‹ï¼š[mybatis-mate-datascope](https://gitee.com/baomidou/mybatis-mate-examples/tree/master/mybatis-mate-datascope)
- ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ @DataScope
  |   å±æ€§   |     å‹     | å¿…é ˆæŒ‡å®š | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ | èª¬æ˜                                     |
  | :------: | :--------: | :------: | :----------: | ---------------------------------------- |
  |   type   |   String   |    å¦    |      ""      | ç¯„å›²ã‚¿ã‚¤ãƒ—ã€æ¥­å‹™åˆ†é¡ã‚’åŒºåˆ¥ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ç©º |
  |  value   | DataColumn[] |    å¦    |      {}      | ãƒ‡ãƒ¼ã‚¿æ¨©é™ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã€è¤‡æ•°ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®çµ„ã¿åˆã‚ã›ã‚’ã‚µãƒãƒ¼ãƒˆ |
  |  ignore  |  boolean   |    å¦    |     false    | æ¨©é™å‡¦ç†ãƒ­ã‚¸ãƒƒã‚¯ã‚’ç„¡è¦–ã™ã‚‹ true ã¯ç„¡åŠ¹åŒ– false ã¯æœ‰åŠ¹åŒ– |
- ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ @DataColumn
  |  å±æ€§  |   å‹   | å¿…é ˆæŒ‡å®š | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ | èª¬æ˜         |
  | :----: | :----: | :------: | :----------: | ------------ |
  | alias  | String |    å¦    |      ""      | é–¢é€£ãƒ†ãƒ¼ãƒ–ãƒ«ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ |
  |  name  | String |    æ˜¯    |              | ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å   |
- è¡Œãƒ¬ãƒ™ãƒ«ç²’åº¦ã®æ¨©é™åˆ¶å¾¡ã€‚ä¾‹ï¼šä¸Šä½éƒ¨é–€ã¯å­éƒ¨é–€ã®æƒ…å ±ã‚’é–²è¦§å¯èƒ½ã€‚
  ```java
  // test ã‚¿ã‚¤ãƒ—ã®ãƒ‡ãƒ¼ã‚¿æ¨©é™ç¯„å›²ã‚’ãƒ†ã‚¹ãƒˆã€æ··åˆãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ãƒ¢ãƒ¼ãƒ‰
  @DataScope(type = "test", value = {
          // é–¢é€£ãƒ†ãƒ¼ãƒ–ãƒ« user ã‚¨ã‚¤ãƒªã‚¢ã‚¹ u ã§éƒ¨é–€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ¨©é™ã‚’æŒ‡å®š
          @DataColumn(alias = "u", name = "department_id"),
          // é–¢é€£ãƒ†ãƒ¼ãƒ–ãƒ« user ã‚¨ã‚¤ãƒªã‚¢ã‚¹ u ã§é›»è©±ç•ªå·ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æŒ‡å®šï¼ˆè‡ªã‚‰åˆ¤æ–­å‡¦ç†ï¼‰
          @DataColumn(alias = "u", name = "mobile")
  })
  @Select("select u.* from user u")
  List<User> selectTestList(IPage<User> page, Long id, @Param("name") String username);

  // ãƒ‡ãƒ¼ã‚¿æ¨©é™ã‚’ãƒ†ã‚¹ãƒˆã€æœ€çµ‚å®Ÿè¡Œ SQL æ–‡
  SELECT u.* FROM user u WHERE (u.department_id IN ('1', '2', '3', '5')) AND u.mobile LIKE '%1533%' LIMIT 1,10
  ```

:::note[`IDataScopeProvider`ã«ã¤ã„ã¦ã®èª¬æ˜]

IDataScopeProvider å®Ÿè£…ã‚¯ãƒ©ã‚¹ã‚’æ³¨å…¥ã—ã¦ãƒ‡ãƒ¼ã‚¿æ¨©é™ã‚’å‡¦ç†ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚ãƒ‡ãƒ¼ã‚¿ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å—ã‘æ¸¡ã—ã«ã¤ã„ã¦ã¯ 2 ã¤ã®æ–¹æ³•ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ï¼š
1. ã‚«ã‚¹ã‚¿ãƒ  mapper ãƒ¡ã‚½ãƒƒãƒ‰ã§ãƒ¡ã‚½ãƒƒãƒ‰ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’é€šã˜ã¦æ¸¡ã™ã€setWhere ãƒ¡ã‚½ãƒƒãƒ‰ã® `Object[] args` ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§å–å¾—
2. ThreadLocal ã‚’åˆ©ç”¨ã—ã¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¸¡ã™ã€controller å±¤ã¾ãŸã¯ service å±¤ã‚’ã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ãƒˆã—ã¦ãƒ‡ãƒ¼ã‚¿æ¨©é™å‡¦ç†ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨­å®šã§ãã¾ã™ã€‚è©³ç´°ã¯ ğŸ‘‰[å‚ç…§](https://gitee.com/baomidou/mybatis-plus-samples/tree/master/mybatis-plus-sample-dynamic-tablename)

:::

## ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ ã®è‡ªå‹•ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹

- ä½¿ç”¨ä¾‹ï¼š
  - ğŸ‘‰ [mybatis-mate-ddl-mysql](https://gitee.com/baomidou/mybatis-mate-examples/tree/master/mybatis-mate-ddl-mysql)
  - ğŸ‘‰ [mybatis-mate-ddl-postgres](https://gitee.com/baomidou/mybatis-mate-examples/tree/master/mybatis-mate-ddl-postgres)
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ `Schema` ã®åˆæœŸåŒ–ã€ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ `SQL` ã®è‡ªå‹•ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚’æä¾›ã—ã¾ã™ã€‚`flyway` ã¨ã¯ç•°ãªã‚Šã€ã‚·ãƒ£ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã•ã‚ŒãŸãƒ†ãƒ¼ãƒ–ãƒ«ã‚„ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ã‚µãƒãƒ¼ãƒˆã—ã€ã‚³ãƒ¼ãƒ‰ã«ã‚ˆã‚‹ SQL ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å®Ÿè¡Œã‚’åˆ¶å¾¡ã§ãã¾ã™ã€‚
- åˆå›å®Ÿè¡Œæ™‚ã«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã« `ddl_history` ãƒ†ãƒ¼ãƒ–ãƒ«ãŒç”Ÿæˆã•ã‚Œã€ä»¥é™ã¯ SQL ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ãŸã³ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±ãŒè‡ªå‹•çš„ã«ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã•ã‚Œã¾ã™ã€‚
  ```java
  @Component
  public class MysqlDdl implements IDdl {

      /**
       * SQL ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å®Ÿè¡Œæ–¹æ³•
       */
      @Override
      public List<String> getSqlFiles() {
          return Arrays.asList(
                  "db/tag-schema.sql",
                  "D:\\db\\tag-data.sql"
          );
      }
  }

  // mysql ã‚¹ãƒ¬ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«åˆ‡ã‚Šæ›¿ãˆã¦ã€SQL ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œ
  ShardingKey.change("mysqlt2");
  ddlScript.run(new StringReader("DELETE FROM user;\n" +
          "INSERT INTO user (id, username, password, sex, email) VALUES\n" +
          "(20, 'Duo', '123456', 0, 'Duo@baomidou.com');"));
  ```

## ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆè¾æ›¸æ›¸ãæˆ»ã—ï¼‰

- ä½¿ç”¨ä¾‹ï¼šğŸ‘‰ [mybatis-mate-dict](https://gitee.com/baomidou/mybatis-mate-examples/tree/master/mybatis-mate-dict)
- ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ @FieldBind
  |   å±æ€§   |   å‹   | å¿…é ˆæŒ‡å®š | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ | èª¬æ˜                                               |
  | :------: | :----: | :------: | :----------: | -------------------------------------------------- |
  | sharding | String |    å¦    |      ""      | ã‚·ãƒ£ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹æŒ‡å®š                     |
  |   type   | String |    æ˜¯    |              | ã‚¿ã‚¤ãƒ—ï¼ˆç•°ãªã‚‹æ¥­å‹™ã‚’åŒºåˆ¥ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ï¼‰           |
  |  target  | String |    æ˜¯    |              | ã‚¿ãƒ¼ã‚²ãƒƒãƒˆè¡¨ç¤ºå±æ€§ï¼ˆãƒã‚¤ãƒ³ãƒ‰å¯¾è±¡å±æ€§ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§ãªã„å ´åˆã¯é™¤å¤–ã—ã¦ãã ã•ã„ï¼‰ |
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ `sex` ã®å€¤ `0`ã€`1` ã‚’è‡ªå‹•çš„ã« `ç”·`ã€`å¥³` ã«ãƒãƒƒãƒ”ãƒ³ã‚°ã—ã¾ã™
- ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¸ã®ãƒãƒƒãƒ”ãƒ³ã‚°ã¨ã—ã¦ãƒã‚¤ãƒ³ãƒ‰ã§ãã¾ã™ã€‚ä¾‹ï¼šæ³¨æ–‡ ID ã«åŸºã¥ã„ã¦æ³¨æ–‡ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¾ãŸã¯ç•ªå·ã«ãƒãƒƒãƒ”ãƒ³ã‚°
  ```java
  @FieldBind(type = "user_sex", target = "sexText")
  private Integer sex;
  // ãƒã‚¤ãƒ³ãƒ‰è¡¨ç¤ºå±æ€§ã€ãƒ†ãƒ¼ãƒ–ãƒ«è¾æ›¸ã§ã¯ã‚ã‚Šã¾ã›ã‚“ï¼ˆé™¤å¤–ï¼‰
  @TableField(exist = false)
  private String sexText;
  ```
- ãƒã‚¤ãƒ³ãƒ‰æ¥­å‹™å‡¦ç†ã‚¯ãƒ©ã‚¹ã¯ IDataBind ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å®Ÿè£…ã—ã€spring ã‚³ãƒ³ãƒ†ãƒŠã«æ³¨å…¥ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™
  ```java
  @Component
  public class DataBind implements IDataBind {
    ...
  }
  ```

## ä»®æƒ³å±æ€§ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°

- ä½¿ç”¨ä¾‹ï¼šğŸ‘‰ [mybatis-mate-jsonbind](https://gitee.com/baomidou/mybatis-mate-examples/tree/master/mybatis-mate-jsonbind)
- ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ @JsonBind
  ```java
  @JsonBind("ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã‚¿ã‚¤ãƒ—")
  public class User {
      ...
  }
  ```
- Json ä»®æƒ³å±æ€§ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°æˆ¦ç•¥ã‚’è¿”ã™
  ```java
  @Component
  public class JsonBindStrategy implements IJsonBindStrategy {

      @Override
      public Map<String, Function<Object, Map<String, Object>>> getStrategyFunctionMap() {
          return new HashMap<String, Function<Object, Map<String, Object>>>(16) {
              {
                  // ä»®æƒ³ãƒãƒ¼ãƒ‰ã‚’æ³¨å…¥
                  put(Type.departmentRole, (obj) -> new HashMap(2) {{
                      User user = (User) obj;
                      // åˆ—æŒ™å‹å¤‰æ›
                      put("statusText", StatusEnum.get(user.getStatus()).getDesc());
                      // ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ã‚¨ãƒªã‚’å‘¼ã³å‡ºã—ã¦å½¹å‰²æƒ…å ±ã‚’å–å¾—å¯èƒ½
                      put("roleName", "ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼");
                  }});
              }
          };
      }
  }
  ```

## ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æš—å·åŒ–ãƒ»å¾©å·

- ä½¿ç”¨ä¾‹ï¼šğŸ‘‰ [mybatis-mate-encrypt](https://gitee.com/baomidou/mybatis-mate-examples/tree/master/mybatis-mate-encrypt)
- ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ @FieldEncrypt
  |    å±æ€§     |    å‹     | å¿…é ˆæŒ‡å®š |       æ—¢å®šå€¤       | èª¬æ˜                   |
  | :---------: | :-------: | :------: | :----------------: | ---------------------- |
  |  password   |  String   |    å¦    |         ""         | æš—å·åŒ–ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰         |
  | algorithm | Algorithm |    å¦    | PBEWithMD5AndDES | PBE MD5 DES æ··åˆã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ  |
  | encryptor |   Class   |    å¦    |    IEncryptor    | æš—å·åŒ–ãƒ—ãƒ­ã‚»ãƒƒã‚µ           |
- ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ  Algorithm
  |             ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ              |                    èª¬æ˜                    |
  | :---------------------------------: |:----------------------------------------:|
  |              MD5_32               |       32 ãƒ“ãƒƒãƒˆ MD5 ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ              |
  |              MD5_16               |           16 ãƒ“ãƒƒãƒˆ MD5 ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ            |
  |              BASE64              |      ä»»æ„ã®ãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ã™64æ–‡å­—ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ       |
  |                AES                |   AES å¯¾ç§°ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ  ã€ã‚ã„ã¾ã„æ¤œç´¢ãŒå¿…è¦ãªå ´åˆã¯å¿…ãšã“ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‘  |
  |                RSA                |             éå¯¾ç§°æš—å·ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ               |
  |                SM2                |   å›½å¯† SM2 éå¯¾ç§°æš—å·ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã€ECC ãƒ™ãƒ¼ã‚¹      |
  |                SM3                | å›½å¯† SM3 ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ€ã‚¤ã‚¸ã‚§ã‚¹ãƒˆã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã€MD5 ã¨æ¯”è¼ƒã—ã¦ç†è§£ã§ãã¾ã™ |
  |                SM4                | å›½å¯† SM4 å¯¾ç§°æš—å·ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã€ç„¡ç·š LAN æ¨™æº–ã®ãƒ–ãƒ­ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ  |
  |       PBEWithMD5AndDES        |                æ··åˆã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ                 |
  |    PBEWithMD5AndTripleDES     |                æ··åˆã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ                 |
  | PBEWithHMACSHA512AndAES_256 |                æ··åˆã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ                 |
  |     PBEWithSHA1AndDESede      |                æ··åˆã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ                 |
  |     PBEWithSHA1AndRC2_40      |                æ··åˆã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ                 |
- ğŸ‘‰ [å›½å¯† SM2.3.4 ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ä½¿ç”¨è¦ç¯„](https://gitee.com/baomidou/mybatis-mate-examples/tree/master/%E5%9B%BD%E5%AF%86SM2.3.4%E7%AE%97%E6%B3%95%E4%BD%BF%E7%94%A8%E8%A7%84%E8%8C%83)
  :::note

  - MD5 ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯ä¸å¯é€†ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§ã‚ã‚Šã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜ã•ã‚Œã‚‹å€¤ã‚‚ã‚¯ã‚¨ãƒªçµæœã‚‚æš—å·æ–‡ã§ã™ã€‚
  - SM4 ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯ã€bouncycastle æš—å·åŒ–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ä¾å­˜ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
  - æ··åˆã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯ã€jasypt æš—å·åŒ–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ä¾å­˜ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
  - ã€æ³¨æ„ã€‘ã‚¯ã‚¨ãƒªã§æš—å·åŒ–ã•ã‚ŒãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿”ã™å ´åˆã€ãã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã¯`æš—å·åŒ–ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³`æƒ…å ±ãŒå«ã¾ã‚Œã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚å˜ç´”ã« String ã‚„ List ãªã©ã®ç‰¹å®šã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿”ã™ã ã‘ã§ã¯å¾©å·ã§ãã¾ã›ã‚“ã€‚

  :::
- ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ `FieldEncrypt` ã¯ãƒ‡ãƒ¼ã‚¿ã®æš—å·åŒ–ã¨å¾©å·ã‚’å®Ÿè£…ã—ã€æ§˜ã€…ãªæš—å·åŒ–ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™
  ```java
  @FieldEncrypt
  private String email;
  ```

## ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒã‚¹ã‚­ãƒ³ã‚°

- ä½¿ç”¨ä¾‹ï¼šğŸ‘‰ [mybatis-mate-sensitive-jackson](https://gitee.com/baomidou/mybatis-mate-examples/tree/master/mybatis-mate-sensitive-jackson)
- ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ @FieldSensitive
- ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ `FieldSensitive` ã¯ãƒ‡ãƒ¼ã‚¿ãƒã‚¹ã‚­ãƒ³ã‚°ã‚’å®Ÿè£…ã—ã€çµ„ã¿è¾¼ã¿ã§ `é›»è©±ç•ªå·`ã€`ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹`ã€`éŠ€è¡Œå£åº§ç•ªå·` ãªã© 9 ç¨®é¡ã®å¸¸ç”¨ãƒã‚¹ã‚­ãƒ³ã‚°ãƒ«ãƒ¼ãƒ«ã‚’æä¾›ã—ã¾ã™
  ```java
  @FieldSensitive("testStrategy")
  private String username;

  @Configuration
  public class SensitiveStrategyConfig {

      /**
       * ãƒã‚¹ã‚­ãƒ³ã‚°æˆ¦ç•¥ã‚’æ³¨å…¥
       */
      @Bean
      public ISensitiveStrategy sensitiveStrategy() {
          // ã‚«ã‚¹ã‚¿ãƒ  testStrategy ã‚¿ã‚¤ãƒ—ã®ãƒã‚¹ã‚­ãƒ³ã‚°å‡¦ç†
          return new SensitiveStrategy().addStrategy("testStrategy", t -> t + "***test***");
      }
  }

  // ãƒã‚¹ã‚­ãƒ³ã‚°å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ï¼ˆç·¨é›†ã‚·ãƒŠãƒªã‚ªç”¨ï¼‰
  RequestDataTransfer.skipSensitive();
  ```

## å¤šãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ãƒ»ã‚·ãƒ£ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆèª­ã¿æ›¸ãåˆ†é›¢ï¼‰

- ä½¿ç”¨ä¾‹ï¼šğŸ‘‰ [mybatis-mate-sharding](https://gitee.com/baomidou/mybatis-mate-examples/tree/master/mybatis-mate-sharding)
- ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ @Sharding
  |    å±æ€§    |   å‹   | å¿…é ˆæŒ‡å®š |          ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤          | èª¬æ˜                              |
  | :--------: | :----: | :------: | :----------------------------: | --------------------------------- |
  |   value    | String |    ã¯    |              ""               | ã‚·ãƒ£ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚°ãƒ«ãƒ¼ãƒ—åã€ç©ºã®å ´åˆã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ—ãƒ©ã‚¤ãƒãƒªãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‚’ä½¿ç”¨ |
  | strategy  | Class  |    å¦    |   RandomShardingStrategy      | ã‚·ãƒ£ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼†ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰æˆ¦ç•¥               |
- è¨­å®š
  ```xml
  mybatis-mate:
    sharding:
      health: true # ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
      primary: mysql # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆé¸æŠãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹
      datasource:
        mysql: # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚°ãƒ«ãƒ¼ãƒ—
          - key: node1
            ...
          - key: node2
            cluster: slave # èª­ã¿æ›¸ãåˆ†é›¢æ™‚ã«SQLã‚¯ã‚¨ãƒªæ“ä½œã‚’æ‹…å½“ã™ã‚‹ã‚¹ãƒ¬ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã€ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§è¨˜è¿°ä¸è¦
            ...
        postgres:
          - key: node1 # ãƒ‡ãƒ¼ã‚¿ãƒãƒ¼ãƒ‰
            ...
  ```
- ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ `Sharding` ã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹åˆ‡ã‚Šæ›¿ãˆã€ã‚°ãƒ«ãƒ¼ãƒ—å†…ãƒãƒ¼ãƒ‰ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ãƒ©ãƒ³ãƒ€ãƒ é¸æŠï¼ˆèª­ã¿å–ã‚Šã¯ã‚¹ãƒ¬ãƒ¼ãƒ–ã€æ›¸ãè¾¼ã¿ã¯ãƒã‚¹ã‚¿ãƒ¼ï¼‰
  ```java
  @Mapper
  @Sharding("mysql")
  public interface UserMapper extends BaseMapper<User> {

      @Sharding("postgres")
      Long selectByUsername(String username);

  }
  ```
- æŒ‡å®šã—ãŸãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒãƒ¼ãƒ‰ã¸ã®åˆ‡ã‚Šæ›¿ãˆ
  ```java
  // mysql ã‚¹ãƒ¬ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ node2 ãƒãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ãˆ
  ShardingKey.change("mysqlnode2");
  ```

## è¤‡æ•°ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã®å‹•çš„ãƒ­ãƒ¼ãƒ‰/ã‚¢ãƒ³ãƒ­ãƒ¼ãƒ‰

- ä½¿ç”¨ä¾‹ï¼šğŸ‘‰ [mybatis-mate-sharding-dynamic](https://gitee.com/baomidou/mybatis-mate-examples/tree/master/mybatis-mate-sharding-dynamic)

## å¤šãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆJTA Atomikosï¼‰

- ä½¿ç”¨ä¾‹ï¼šğŸ‘‰ [mybatis-mate-sharding-jta-atomikos](https://gitee.com/baomidou/mybatis-mate-examples/tree/master/mybatis-mate-sharding-jta-atomikos)
