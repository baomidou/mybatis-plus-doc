---
title: åˆ†é¡µæ’ä»¶
date: 2021-12-14 19:12:01
permalink: /pages/97710a/
article: false
---

## PaginationInnerInterceptor

### æ”¯æŒçš„æ•°æ®åº“

- mysqlï¼Œoracleï¼Œdb2ï¼Œh2ï¼Œhsqlï¼Œsqliteï¼Œpostgresqlï¼Œsqlserverï¼ŒPhoenixï¼ŒGauss
ï¼Œclickhouseï¼ŒSybaseï¼ŒOceanBaseï¼ŒFirebirdï¼Œcubridï¼Œgoldilocksï¼Œcsiidbï¼Œinformixï¼ŒTDengineï¼Œredshift

- è¾¾æ¢¦æ•°æ®åº“ï¼Œè™šè°·æ•°æ®åº“ï¼Œäººå¤§é‡‘ä»“æ•°æ®åº“ï¼Œå—å¤§é€šç”¨(ååº“)æ•°æ®åº“ï¼Œå—å¤§é€šç”¨æ•°æ®åº“ï¼Œç¥é€šæ•°æ®åº“ï¼Œç€šé«˜æ•°æ®åº“ï¼Œä¼˜ç‚«æ•°æ®åº“

ğŸ‘‰ [å¦‚æœæ²¡æœ‰æ”¯æŒä½ éœ€è¦çš„æ•°æ®åº“ï¼Œç‚¹å‡»å‚è€ƒ Pull Request æˆ‘ä»¬ä¼šç¬¬ä¸€æ—¶é—´å®¡æ ¸](https://github.com/baomidou/mybatis-plus/pull/1550/files)


### å±æ€§ä»‹ç»

| å±æ€§å | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
| :-: | :-: | :-: | :-: |
| overflow | boolean | false | æº¢å‡ºæ€»é¡µæ•°åæ˜¯å¦è¿›è¡Œå¤„ç†(é»˜è®¤ä¸å¤„ç†,å‚è§ `æ’ä»¶#continuePage` æ–¹æ³•) |
| maxLimit | Long |  | å•é¡µåˆ†é¡µæ¡æ•°é™åˆ¶(é»˜è®¤æ— é™åˆ¶,å‚è§ `æ’ä»¶#handlerLimit` æ–¹æ³•) |
| dbType | DbType |  | æ•°æ®åº“ç±»å‹(æ ¹æ®ç±»å‹è·å–åº”ä½¿ç”¨çš„åˆ†é¡µæ–¹è¨€,å‚è§ `æ’ä»¶#findIDialect` æ–¹æ³•) |
| dialect | IDialect |  | æ–¹è¨€å®ç°ç±»(å‚è§ `æ’ä»¶#findIDialect` æ–¹æ³•) |

> å»ºè®®å•ä¸€æ•°æ®åº“ç±»å‹çš„å‡è®¾ç½® dbType

### è‡ªå®šä¹‰çš„ mapper#method ä½¿ç”¨åˆ†é¡µ

``` java
IPage<UserVo> selectPageVo(IPage<?> page, Integer state);
// or (class MyPage extends Ipage<UserVo>{ private Integer state; })
MyPage selectPageVo(MyPage page);
// or
List<UserVo> selectPageVo(IPage<UserVo> page, Integer state);
```

```xml
<select id="selectPageVo" resultType="xxx.xxx.xxx.UserVo">
    SELECT id,name FROM user WHERE state=#{state}
</select>
```

> å¦‚æœè¿”å›ç±»å‹æ˜¯ IPage åˆ™å…¥å‚çš„ IPage ä¸èƒ½ä¸ºnull,å› ä¸º è¿”å›çš„IPage == å…¥å‚çš„IPage; å¦‚æœæƒ³ä¸´æ—¶ä¸åˆ†é¡µ,å¯ä»¥åœ¨åˆå§‹åŒ–IPageæ—¶sizeå‚æ•°ä¼  <0 çš„å€¼;  
> å¦‚æœè¿”å›ç±»å‹æ˜¯ List åˆ™å…¥å‚çš„ IPage å¯ä»¥ä¸º null(ä¸º null åˆ™ä¸åˆ†é¡µ),ä½†éœ€è¦ä½ æ‰‹åŠ¨ å…¥å‚çš„IPage.setRecords(è¿”å›çš„ List);  
> å¦‚æœ xml éœ€è¦ä» page é‡Œå–å€¼,éœ€è¦ `page.å±æ€§` è·å–

### å…¶ä»–:

> ç”Ÿæˆ countSql ä¼šåœ¨ `left join` çš„è¡¨ä¸å‚ä¸ `where` æ¡ä»¶çš„æƒ…å†µä¸‹,æŠŠ `left join` ä¼˜åŒ–æ‰  
> æ‰€ä»¥å»ºè®®ä»»ä½•å¸¦æœ‰ `left join` çš„sql,éƒ½å†™æ ‡å‡†sql,å³ç»™äºè¡¨ä¸€ä¸ªåˆ«å,å­—æ®µä¹Ÿè¦ `åˆ«å.å­—æ®µ`


::: warning æ³¨æ„ï¼

- å¤šä¸ªæ’ä»¶ä½¿ç”¨çš„æƒ…å†µï¼Œè¯·å°†åˆ†é¡µæ’ä»¶æ”¾åˆ° `æ’ä»¶æ‰§è¡Œé“¾` æœ€åé¢ã€‚å¦‚åœ¨ç§Ÿæˆ·æ’ä»¶å‰é¢ï¼Œä¼šå‡ºç°  `COUNT ` æ‰§è¡Œ  `SQL ` ä¸å‡†ç¡®é—®é¢˜ã€‚

:::


## Page

> è¯¥ç±»ç»§æ‰¿äº† `IPage` ç±»ï¼Œå®ç°äº† `ç®€å•åˆ†é¡µæ¨¡å‹` å¦‚æœä½ è¦å®ç°è‡ªå·±çš„åˆ†é¡µæ¨¡å‹å¯ä»¥ç»§æ‰¿ `Page` ç±»æˆ–è€…å®ç° `IPage` ç±»

| å±æ€§å | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
| :-: | :-: | :-: | :-: |
| records | List<T> | emptyList | æŸ¥è¯¢æ•°æ®åˆ—è¡¨ |
| total | Long | 0 | æŸ¥è¯¢åˆ—è¡¨æ€»è®°å½•æ•° |
| size | Long | 10 | æ¯é¡µæ˜¾ç¤ºæ¡æ•°ï¼Œé»˜è®¤ `10` |
| current | Long | 1 | å½“å‰é¡µ |
| orders | List<OrderItem> | emptyList | æ’åºå­—æ®µä¿¡æ¯ï¼Œå…è®¸å‰ç«¯ä¼ å…¥çš„æ—¶å€™ï¼Œæ³¨æ„ SQL æ³¨å…¥é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ `SqlInjectionUtils.check(...)` æ£€æŸ¥æ–‡æœ¬ |
| optimizeCountSql | boolean | true | è‡ªåŠ¨ä¼˜åŒ– COUNT SQL å¦‚æœé‡åˆ° `jSqlParser` æ— æ³•è§£ææƒ…å†µï¼Œè®¾ç½®è¯¥å‚æ•°ä¸º `false` |
| optimizeJoinOfCountSql | boolean | true | è‡ªåŠ¨ä¼˜åŒ– COUNT SQL æ˜¯å¦æŠŠ join æŸ¥è¯¢éƒ¨åˆ†ç§»é™¤ |
| searchCount | boolean | true | æ˜¯å¦è¿›è¡Œ count æŸ¥è¯¢ï¼Œå¦‚æœæŒ‡å‘æŸ¥è¯¢åˆ°åˆ—è¡¨ä¸è¦æŸ¥è¯¢æ€»è®°å½•æ•°ï¼Œè®¾ç½®è¯¥å‚æ•°ä¸º `false` |
| maxLimit | Long |  | å•é¡µåˆ†é¡µæ¡æ•°é™åˆ¶ |
| countId | String | | `xml` è‡ªå®šä¹‰ `count` æŸ¥è¯¢çš„ `statementId` |
