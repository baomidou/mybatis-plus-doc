---
title: æ³¨è§£
date: 2021-12-14 18:09:29
permalink: /pages/223848/
article: false
---

æœ¬æ–‡å°†ä»‹ç» `MybatisPlus` æ³¨è§£åŒ…ç›¸å…³ç±»è¯¦è§£ï¼ˆæ›´å¤šè¯¦ç»†æè¿°å¯ç‚¹å‡»æŸ¥çœ‹æºç æ³¨é‡Šï¼‰

> æ³¨è§£ç±»åŒ…æºç ï¼šğŸ‘‰ [mybatis-plus-annotation](https://gitee.com/baomidou/mybatis-plus/tree/3.0/mybatis-plus-annotation/src/main/java/com/baomidou/mybatisplus/annotation)

## [@TableName](https://github.com/baomidou/mybatis-plus/blob/3.0/mybatis-plus-annotation/src/main/java/com/baomidou/mybatisplus/annotation/TableName.java)

- æè¿°ï¼šè¡¨åæ³¨è§£ï¼Œæ ‡è¯†å®ä½“ç±»å¯¹åº”çš„è¡¨
- ä½¿ç”¨ä½ç½®ï¼šå®ä½“ç±»

```java {1}
@TableName("sys_user")
public class User {
    private Long id;
    private String name;
    private Integer age;
    private String email;
}
```

| å±æ€§             | ç±»å‹     | å¿…é¡»æŒ‡å®š | é»˜è®¤å€¼ | æè¿°                                                                                      |
| :--------------- | :------- | :------- | :----- | :---------------------------------------------------------------------------------------- |
| value            | String   | å¦       | ""     | è¡¨å                                                                                      |
| schema           | String   | å¦       | ""     | schema                                                                                    |
| keepGlobalPrefix | boolean  | å¦       | false  | æ˜¯å¦ä¿æŒä½¿ç”¨å…¨å±€çš„ tablePrefix çš„å€¼ï¼ˆå½“å…¨å±€ tablePrefix ç”Ÿæ•ˆæ—¶ï¼‰                          |
| resultMap        | String   | å¦       | ""     | xml ä¸­ resultMap çš„ idï¼ˆç”¨äºæ»¡è¶³ç‰¹å®šç±»å‹çš„å®ä½“ç±»å¯¹è±¡ç»‘å®šï¼‰                                |
| autoResultMap    | boolean  | å¦       | false  | æ˜¯å¦è‡ªåŠ¨æ„å»º resultMap å¹¶ä½¿ç”¨ï¼ˆå¦‚æœè®¾ç½® resultMap åˆ™ä¸ä¼šè¿›è¡Œ resultMap çš„è‡ªåŠ¨æ„å»ºä¸æ³¨å…¥ï¼‰ |
| excludeProperty  | String[] | å¦       | {}     | éœ€è¦æ’é™¤çš„å±æ€§å <Badge text="@since 3.3.1" type="tip" vertical="middle"/>                |

**å…³äº `autoResultMap` çš„è¯´æ˜ï¼š**

MP ä¼šè‡ªåŠ¨æ„å»ºä¸€ä¸ª `resultMap` å¹¶æ³¨å…¥åˆ° MyBatis é‡Œï¼ˆä¸€èˆ¬ç”¨ä¸ä¸Šï¼‰ï¼Œè¯·æ³¨æ„ä»¥ä¸‹å†…å®¹ï¼š

å› ä¸º MP åº•å±‚æ˜¯ MyBatisï¼Œæ‰€ä»¥ MP åªæ˜¯å¸®æ‚¨æ³¨å…¥äº†å¸¸ç”¨ CRUD åˆ° MyBatis é‡Œï¼Œæ³¨å…¥ä¹‹å‰æ˜¯åŠ¨æ€çš„ï¼ˆæ ¹æ®æ‚¨çš„ Entity å­—æ®µä»¥åŠæ³¨è§£å˜åŒ–è€Œå˜åŒ–ï¼‰ï¼Œä½†æ˜¯æ³¨å…¥ä¹‹åæ˜¯é™æ€çš„ï¼ˆç­‰äº XML é…ç½®ä¸­çš„å†…å®¹ï¼‰ã€‚

è€Œå¯¹äº `typeHandler` å±æ€§ï¼ŒMyBatis åªæ”¯æŒå†™åœ¨ 2 ä¸ªåœ°æ–¹:

1. å®šä¹‰åœ¨ resultMap é‡Œï¼Œä½œç”¨äºæŸ¥è¯¢ç»“æœçš„å°è£…
2. å®šä¹‰åœ¨ `insert` å’Œ `update` è¯­å¥çš„ `#{property}` ä¸­çš„ `property` åé¢ï¼ˆä¾‹ï¼š`#{property,typehandler=xxx.xxx.xxx}`ï¼‰ï¼Œå¹¶ä¸”åªä½œç”¨äºå½“å‰ `è®¾ç½®å€¼`

é™¤äº†ä»¥ä¸Šä¸¤ç§ç›´æ¥æŒ‡å®š `typeHandler` çš„å½¢å¼ï¼ŒMyBatis æœ‰ä¸€ä¸ªå…¨å±€æ‰«æè‡ªå®šä¹‰ `typeHandler` åŒ…çš„é…ç½®ï¼ŒåŸç†æ˜¯æ ¹æ®æ‚¨çš„ `property` ç±»å‹å»æ‰¾å…¶å¯¹åº”çš„ `typeHandler` å¹¶ä½¿ç”¨ã€‚

## [@TableId](https://github.com/baomidou/mybatis-plus/blob/3.0/mybatis-plus-annotation/src/main/java/com/baomidou/mybatisplus/annotation/TableId.java)

- æè¿°ï¼šä¸»é”®æ³¨è§£
- ä½¿ç”¨ä½ç½®ï¼šå®ä½“ç±»ä¸»é”®å­—æ®µ

```java {3}
@TableName("sys_user")
public class User {
    @TableId
    private Long id;
    private String name;
    private Integer age;
    private String email;
}
```

| å±æ€§  | ç±»å‹   | å¿…é¡»æŒ‡å®š | é»˜è®¤å€¼      | æè¿°         |
| :---- | :----- | :------- | :---------- | :----------- |
| value | String | å¦       | ""          | ä¸»é”®å­—æ®µå   |
| type  | Enum   | å¦       | IdType.NONE | æŒ‡å®šä¸»é”®ç±»å‹ |

### [IdType](https://github.com/baomidou/mybatis-plus/blob/3.0/mybatis-plus-annotation/src/main/java/com/baomidou/mybatisplus/annotation/IdType.java)

| å€¼                | æè¿°                                                                                                                                                            |
| :---------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| AUTO              | æ•°æ®åº“ ID è‡ªå¢                                                                                                                                                  |
| NONE              | æ— çŠ¶æ€ï¼Œè¯¥ç±»å‹ä¸ºæœªè®¾ç½®ä¸»é”®ç±»å‹ï¼ˆæ³¨è§£é‡Œç­‰äºè·Ÿéšå…¨å±€ï¼Œå…¨å±€é‡Œçº¦ç­‰äº INPUTï¼‰                                                                                        |
| INPUT             | insert å‰è‡ªè¡Œ set ä¸»é”®å€¼                                                                                                                                        |
| ASSIGN_ID         | åˆ†é… ID(ä¸»é”®ç±»å‹ä¸º Number(Long å’Œ Integer)æˆ– String)(since 3.3.0),ä½¿ç”¨æ¥å£`IdentifierGenerator`çš„æ–¹æ³•`nextId`(é»˜è®¤å®ç°ç±»ä¸º`DefaultIdentifierGenerator`é›ªèŠ±ç®—æ³•) |
| ASSIGN_UUID       | åˆ†é… UUID,ä¸»é”®ç±»å‹ä¸º String(since 3.3.0),ä½¿ç”¨æ¥å£`IdentifierGenerator`çš„æ–¹æ³•`nextUUID`(é»˜è®¤ default æ–¹æ³•)                                                       |
| ~~ID_WORKER~~     | åˆ†å¸ƒå¼å…¨å±€å”¯ä¸€ ID é•¿æ•´å‹ç±»å‹(please use `ASSIGN_ID`)                                                                                                            |
| ~~UUID~~          | 32 ä½ UUID å­—ç¬¦ä¸²(please use `ASSIGN_UUID`)                                                                                                                     |
| ~~ID_WORKER_STR~~ | åˆ†å¸ƒå¼å…¨å±€å”¯ä¸€ ID å­—ç¬¦ä¸²ç±»å‹(please use `ASSIGN_ID`)                                                                                                            |

## [@TableField](https://github.com/baomidou/mybatis-plus/blob/3.0/mybatis-plus-annotation/src/main/java/com/baomidou/mybatisplus/annotation/TableField.java)

- æè¿°ï¼šå­—æ®µæ³¨è§£ï¼ˆéä¸»é”®ï¼‰

```java {5}
@TableName("sys_user")
public class User {
    @TableId
    private Long id;
    @TableFiled("nickname")
    private String name;
    private Integer age;
    private String email;
}
```

| å±æ€§             | ç±»å‹                         | å¿…é¡»æŒ‡å®š | é»˜è®¤å€¼                   | æè¿°                                                                                                                                                                                                                                          |
| :--------------- | :--------------------------- | :------- | :----------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| value            | String                       | å¦       | ""                       | æ•°æ®åº“å­—æ®µå                                                                                                                                                                                                                                  |
| exist            | boolean                      | å¦       | true                     | æ˜¯å¦ä¸ºæ•°æ®åº“è¡¨å­—æ®µ                                                                                                                                                                                                                            |
| condition        | String                       | å¦       | ""                       | å­—æ®µ `where` å®ä½“æŸ¥è¯¢æ¯”è¾ƒæ¡ä»¶ï¼Œæœ‰å€¼è®¾ç½®åˆ™æŒ‰è®¾ç½®çš„å€¼ä¸ºå‡†ï¼Œæ²¡æœ‰åˆ™ä¸ºé»˜è®¤å…¨å±€çš„ `%s=#{%s}`ï¼Œ[å‚è€ƒ](https://github.com/baomidou/mybatis-plus/blob/3.0/mybatis-plus-annotation/src/main/java/com/baomidou/mybatisplus/annotation/SqlCondition.java) |
| update           | String                       | å¦       | ""                       | å­—æ®µ `update set` éƒ¨åˆ†æ³¨å…¥ï¼Œä¾‹å¦‚ï¼šå½“åœ¨versionå­—æ®µä¸Šæ³¨è§£`update="%s+1"` è¡¨ç¤ºæ›´æ–°æ—¶ä¼š `set version=version+1` ï¼ˆè¯¥å±æ€§ä¼˜å…ˆçº§é«˜äº `el` å±æ€§ï¼‰                                                                                                                         |
| insertStrategy   | Enum                         | å¦       | FieldStrategy.DEFAULT    | ä¸¾ä¾‹ï¼šNOT_NULL <br/> `insert into table_a(<if test="columnProperty != null">column</if>) values (<if test="columnProperty != null">#{columnProperty}</if>)`                                                                                   |
| updateStrategy   | Enum                         | å¦       | FieldStrategy.DEFAULT    | ä¸¾ä¾‹ï¼šIGNORED <br/> `update table_a set column=#{columnProperty}`                                                                                                                                                                             |
| whereStrategy    | Enum                         | å¦       | FieldStrategy.DEFAULT    | ä¸¾ä¾‹ï¼šNOT_EMPTY <br/> `where <if test="columnProperty != null and columnProperty!=''">column=#{columnProperty}</if>`                                                                                                                          |
| fill             | Enum                         | å¦       | FieldFill.DEFAULT        | å­—æ®µè‡ªåŠ¨å¡«å……ç­–ç•¥                                                                                                                                                                                                                              |
| select           | boolean                      | å¦       | true                     | æ˜¯å¦è¿›è¡Œ select æŸ¥è¯¢                                                                                                                                                                                                                          |
| keepGlobalFormat | boolean                      | å¦       | false                    | æ˜¯å¦ä¿æŒä½¿ç”¨å…¨å±€çš„ format è¿›è¡Œå¤„ç†                                                                                                                                                                                                            |
| jdbcType         | JdbcType                     | å¦       | JdbcType.UNDEFINED       | JDBC ç±»å‹ (è¯¥é»˜è®¤å€¼ä¸ä»£è¡¨ä¼šæŒ‰ç…§è¯¥å€¼ç”Ÿæ•ˆ)                                                                                                                                                                                                      |
| typeHandler      | Class<? extends TypeHandler> | å¦       | UnknownTypeHandler.class | ç±»å‹å¤„ç†å™¨ (è¯¥é»˜è®¤å€¼ä¸ä»£è¡¨ä¼šæŒ‰ç…§è¯¥å€¼ç”Ÿæ•ˆ)                                                                                                                                                                                                     |
| numericScale     | String                       | å¦       | ""                       | æŒ‡å®šå°æ•°ç‚¹åä¿ç•™çš„ä½æ•°                                                                                                                                                                                                                        |

::: warning å…³äº`jdbcType`å’Œ`typeHandler`ä»¥åŠ`numericScale`çš„è¯´æ˜:
`numericScale`åªç”Ÿæ•ˆäº update çš„ sql.
`jdbcType`å’Œ`typeHandler`å¦‚æœä¸é…åˆ`@TableName#autoResultMap = true`ä¸€èµ·ä½¿ç”¨,ä¹Ÿåªç”Ÿæ•ˆäº update çš„ sql.
å¯¹äº`typeHandler`å¦‚æœä½ çš„å­—æ®µç±»å‹å’Œ set è¿›å»çš„ç±»å‹ä¸º`equals`å…³ç³»,åˆ™åªéœ€è¦è®©ä½ çš„`typeHandler`è®© Mybatis åŠ è½½åˆ°å³å¯,ä¸éœ€è¦ä½¿ç”¨æ³¨è§£
:::

### [FieldStrategy](https://github.com/baomidou/mybatis-plus/blob/3.0/mybatis-plus-annotation/src/main/java/com/baomidou/mybatisplus/annotation/FieldStrategy.java)

| å€¼        | æè¿°                                                        |
| :-------- | :---------------------------------------------------------- |
| IGNORED   | å¿½ç•¥åˆ¤æ–­                                                    |
| NOT_NULL  | é NULL åˆ¤æ–­                                                |
| NOT_EMPTY | éç©ºåˆ¤æ–­(åªå¯¹å­—ç¬¦ä¸²ç±»å‹å­—æ®µ,å…¶ä»–ç±»å‹å­—æ®µä¾ç„¶ä¸ºé NULL åˆ¤æ–­) |
| DEFAULT   | è¿½éšå…¨å±€é…ç½®                                                |

### [FieldFill](https://github.com/baomidou/mybatis-plus/blob/3.0/mybatis-plus-annotation/src/main/java/com/baomidou/mybatisplus/annotation/FieldFill.java)

| å€¼            | æè¿°                 |
| :------------ | :------------------- |
| DEFAULT       | é»˜è®¤ä¸å¤„ç†           |
| INSERT        | æ’å…¥æ—¶å¡«å……å­—æ®µ       |
| UPDATE        | æ›´æ–°æ—¶å¡«å……å­—æ®µ       |
| INSERT_UPDATE | æ’å…¥å’Œæ›´æ–°æ—¶å¡«å……å­—æ®µ |

## [@Version](https://github.com/baomidou/mybatis-plus/blob/3.0/mybatis-plus-annotation/src/main/java/com/baomidou/mybatisplus/annotation/Version.java)

- æè¿°ï¼šä¹è§‚é”æ³¨è§£ã€æ ‡è®° `@Verison` åœ¨å­—æ®µä¸Š

## [@EnumValue](https://github.com/baomidou/mybatis-plus/blob/3.0/mybatis-plus-annotation/src/main/java/com/baomidou/mybatisplus/annotation/EnumValue.java)

- æè¿°ï¼šæ™®é€šæšä¸¾ç±»æ³¨è§£(æ³¨è§£åœ¨æšä¸¾å­—æ®µä¸Š)

## [@TableLogic](https://github.com/baomidou/mybatis-plus/blob/3.0/mybatis-plus-annotation/src/main/java/com/baomidou/mybatisplus/annotation/TableLogic.java)

- æè¿°ï¼šè¡¨å­—æ®µé€»è¾‘å¤„ç†æ³¨è§£ï¼ˆé€»è¾‘åˆ é™¤ï¼‰

| å±æ€§   | ç±»å‹   | å¿…é¡»æŒ‡å®š | é»˜è®¤å€¼ | æè¿°         |
| :----- | :----- | :------- | :----- | :----------- |
| value  | String | å¦       | ""     | é€»è¾‘æœªåˆ é™¤å€¼ |
| delval | String | å¦       | ""     | é€»è¾‘åˆ é™¤å€¼   |

## [@SqlParser](https://github.com/baomidou/mybatis-plus/blob/3.0/mybatis-plus-annotation/src/main/java/com/baomidou/mybatisplus/annotation/SqlParser.java) <Badge text="Deprecated" type="warn"/>

> see [@InterceptorIgnore](#InterceptorIgnore)

## [@KeySequence](https://github.com/baomidou/mybatis-plus/blob/3.0/mybatis-plus-annotation/src/main/java/com/baomidou/mybatisplus/annotation/KeySequence.java)

- æè¿°ï¼šåºåˆ—ä¸»é”®ç­–ç•¥ `oracle`
- å±æ€§ï¼švalueã€resultMap

| å±æ€§  | ç±»å‹   | å¿…é¡»æŒ‡å®š | é»˜è®¤å€¼     | æè¿°                                                                |
| :---- | :----- | :------- | :--------- | :------------------------------------------------------------------ |
| value | String | å¦       | ""         | åºåˆ—å                                                              |
| clazz | Class  | å¦       | Long.class | id çš„ç±»å‹, å¯ä»¥æŒ‡å®š String.classï¼Œè¿™æ ·è¿”å›çš„ Sequence å€¼æ˜¯å­—ç¬¦ä¸²"1" |

## [@InterceptorIgnore](https://gitee.com/baomidou/mybatis-plus/blob/3.0/mybatis-plus-annotation/src/main/java/com/baomidou/mybatisplus/annotation/InterceptorIgnore.java)

> see [æ’ä»¶ä¸»ä½“](/pages/2976a3/)

## [@OrderBy](https://gitee.com/baomidou/mybatis-plus/blob/3.0/mybatis-plus-annotation/src/main/java/com/baomidou/mybatisplus/annotation/OrderBy.java)

- æè¿°ï¼šå†…ç½® SQL é»˜è®¤æŒ‡å®šæ’åºï¼Œä¼˜å…ˆçº§ä½äº wrapper æ¡ä»¶æŸ¥è¯¢

| å±æ€§   | ç±»å‹    | å¿…é¡»æŒ‡å®š | é»˜è®¤å€¼          | æè¿°           |
| :----- | :------ | :------- | :-------------- | :------------- |
| isDesc | boolean | å¦       | true            | æ˜¯å¦å€’åºæŸ¥è¯¢   |
| sort   | short   | å¦       | Short.MAX_VALUE | æ•°å­—è¶Šå°è¶Šé å‰ |
