---
title: è„šæœ¬è‡ªåŠ¨ç»´æŠ¤
date: 2022-12-25 18:33:00
permalink: /pages/1812u1/
article: false
---

- `3.5.3 +` ç‰ˆæœ¬æ”¯æŒ

æ•°æ®åº“ `DDL` è¡¨ç»“æ„æ‰§è¡Œ `SQL` è‡ªåŠ¨ç»´æŠ¤åŠŸèƒ½

ğŸ‘‰ [mybatis-plus-sample-ddl-mysql](https://gitee.com/baomidou/mybatis-plus-samples/tree/master/mybatis-plus-sample-ddl-mysql)

- æ•°æ®åº“ `Schema` åˆå§‹åŒ–ï¼Œå‡çº§ `SQL` è‡ªåŠ¨ç»´æŠ¤ï¼ŒåŒºåˆ«äº `flyway` æ”¯æŒåˆ†è¡¨åº“ã€å¯æ§åˆ¶ä»£ç æ‰§è¡Œ SQL è„šæœ¬
- é¦–æ¬¡ä¼šåœ¨æ•°æ®åº“ä¸­ç”Ÿæˆ `ddl_history` è¡¨ï¼Œæ¯æ¬¡æ‰§è¡Œ `SQLè„šæœ¬` ä¼šè‡ªåŠ¨ç»´æŠ¤ç‰ˆæœ¬ä¿¡æ¯ã€‚

::: tip

éœ€è¦æ³¨æ„çš„æ˜¯é’ˆå¯¹å½“å‰æ•°æ®æºæ‰§è¡Œ `DDL` å¦‚æœè„šæœ¬ä¸­å­˜åœ¨åˆ‡æ¢æ•°æ®æºåˆ›å»ºæ•°æ®åº“æ“ä½œå¯èƒ½ä¼šå¼‚å¸¸ã€‚

ä¸åŒæ•°æ®åº“éœ€è¦åˆ‡æ¢æ•°æ®æºååŠ¨æ€æ‰§è¡Œè„šæœ¬å‘½ä»¤å³å¯ã€‚

è¯¥åŠŸèƒ½ä¸º `ä¼ä¸šçº§é«˜çº§ç‰¹æ€§` å¼€æºç‰ˆ

:::

```java
@Component
public class MysqlDdl implements IDdl {

    /**
     * æ‰§è¡Œ SQL è„šæœ¬æ–¹å¼
     */
    @Override
    public List<String> getSqlFiles() {
        return Arrays.asList(
                "db/tag-schema.sql",
                "D:\\db\\tag-data.sql"
        );
    }
}

// åˆ‡æ¢åˆ° mysql ä»åº“ï¼Œæ‰§è¡Œ SQL è„šæœ¬
ShardingKey.change("mysqlt2");
ddlScript.run(new StringReader("DELETE FROM user;\n" +
        "INSERT INTO user (id, username, password, sex, email) VALUES\n" +
        "(20, 'Duo', '123456', 0, 'Duo@baomidou.com');"));
```
